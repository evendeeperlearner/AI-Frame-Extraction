2025-09-09 06:45:02,983 - __main__ - INFO - Model configuration: {'model_name': 'facebook/dinov3-vits16-pretrain-lvd1689m', 'model_version': 'dinov3', 'is_dinov3': True, 'estimated_params': '~21M parameters', 'recommended_batch_size': 8}
2025-09-09 06:45:02,983 - __main__ - INFO - Extraction rates: 2.0 fps (rich) / 0.25 fps (poor)
2025-09-09 06:45:02,983 - __main__ - INFO - Expected rich interval: 0.50s
2025-09-09 06:45:02,983 - __main__ - INFO - Expected poor interval: 4.00s
2025-09-09 06:45:03,019 - src.core.video_processor - INFO - FFmpeg validated: ffmpeg version 7.1.1 Copyright (c) 2000-2025 the FFmpeg developers
2025-09-09 06:45:03,019 - src.core.feature_extractor - INFO - Loading DINOV3 model: facebook/dinov3-vits16-pretrain-lvd1689m
2025-09-09 06:45:03,019 - src.core.feature_extractor - INFO - Model info: ~21M parameters
2025-09-09 06:45:04,084 - src.core.feature_extractor - INFO - Model compilation enabled
2025-09-09 06:45:04,084 - src.core.feature_extractor - INFO - DINOv3 model loaded successfully on mps
2025-09-09 06:45:04,084 - src.core.feature_extractor - INFO - Configured MPS optimizations
2025-09-09 06:45:04,084 - src.pipeline.adaptive_extraction_pipeline - INFO - Pipeline initialized with device: {'device': 'mps', 'device_count': 1, 'type': 'Metal Performance Shaders', 'available_memory_gb': 'Shared with system RAM'}
2025-09-09 06:45:04,084 - src.pipeline.adaptive_extraction_pipeline - INFO - === Starting Adaptive Frame Extraction Pipeline ===
2025-09-09 06:45:04,084 - src.pipeline.adaptive_extraction_pipeline - INFO - Phase 1: Video Analysis and Validation
2025-09-09 06:45:04,121 - src.core.video_processor - INFO - Video info: 1920x1080 @ 30.0fps, 17.9s
2025-09-09 06:45:04,121 - src.core.video_processor - INFO - Video validation successful: {'duration': 17.8667, 'size_bytes': 19213983, 'width': 1920, 'height': 1080, 'fps': 30.0, 'total_frames': 536, 'codec': 'hevc', 'pixel_format': 'yuv420p10le', 'bit_rate': 8388433, 'format_name': 'mov,mp4,m4a,3gp,3g2,mj2'}
2025-09-09 06:45:04,155 - src.core.video_processor - INFO - Video info: 1920x1080 @ 30.0fps, 17.9s
2025-09-09 06:45:04,155 - src.pipeline.adaptive_extraction_pipeline - INFO - Video: 1920x1080 @ 30.00fps
Duration: 17.9s (536 frames)
Size: 18.3MB
2025-09-09 06:45:04,155 - src.pipeline.adaptive_extraction_pipeline - INFO - Estimated memory requirement: 2190.6MB
2025-09-09 06:45:04,156 - src.pipeline.adaptive_extraction_pipeline - INFO - Phase 2: Adaptive Frame Selection
2025-09-09 06:45:04,156 - src.core.dynamic_sampler - INFO - Starting dynamic frame selection with adaptive rates...
2025-09-09 06:45:04,190 - src.core.video_processor - INFO - Video info: 1920x1080 @ 30.0fps, 17.9s
2025-09-09 06:45:04,190 - src.core.dynamic_sampler - INFO - Video FPS: 30.00
2025-09-09 06:45:04,190 - src.core.dynamic_sampler - INFO - Feature-rich extraction: 2.0 fps
2025-09-09 06:45:04,190 - src.core.dynamic_sampler - INFO - Feature-poor extraction: 0.25 fps (1 frame every 4.0s)
2025-09-09 06:45:04,190 - src.core.dynamic_sampler - INFO - Pass 1: Analyzing video regions...
2025-09-09 06:45:04,190 - src.core.dynamic_sampler - INFO - Analyzing video regions (sampling every 15 frames)...
2025-09-09 06:45:05,327 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:05,962 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:06,589 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:07,216 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:07,846 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:08,483 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:09,121 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:09,752 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:10,402 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:11,054 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:11,695 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:12,338 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:12,978 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:13,608 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:14,235 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:14,871 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:15,511 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:16,148 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:16,784 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:17,427 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:18,055 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:18,695 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:19,331 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:19,965 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:20,604 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:21,238 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:21,880 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:22,510 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:23,140 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:23,769 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:24,396 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:25,027 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:25,660 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:26,286 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:26,917 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:27,547 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:27,864 - src.core.dynamic_sampler - INFO - Region analysis complete: 526 regions identified
2025-09-09 06:45:27,864 - src.core.dynamic_sampler - INFO - Pass 2: Dynamic frame extraction...
2025-09-09 06:45:27,864 - src.core.dynamic_sampler - INFO - Frame intervals - Rich: every 15 frames, Poor: every 120 frames
2025-09-09 06:45:28,156 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:31,444 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:34,715 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:37,998 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:41,118 - src.core.saliency_analyzer - WARNING - Texture complexity computation failed: The maximum grayscale value in the image should be smaller than the number of levels.
2025-09-09 06:45:42,504 - src.core.dynamic_sampler - INFO - Dynamic extraction complete:
  Total frames processed: 536
  Feature-rich regions: 0
  Feature-poor regions: 36
  Frames selected from rich regions: 0
  Frames selected from poor regions: 5
  Total selected: 5
2025-09-09 06:45:42,590 - src.pipeline.adaptive_extraction_pipeline - INFO - Saved 5 frames to results/dinov3_extract_dinov3small_2.0fps_0.25fps
2025-09-09 06:45:42,591 - src.pipeline.adaptive_extraction_pipeline - INFO - Phase 3: Saving Results and Metadata
2025-09-09 06:45:42,592 - src.pipeline.adaptive_extraction_pipeline - INFO - Results saved to results/dinov3_extract_dinov3small_2.0fps_0.25fps
2025-09-09 06:45:42,592 - src.pipeline.adaptive_extraction_pipeline - INFO - Quality Summary:
  Selection rate: 0.9%
  Avg composite score: nan
  Avg SfM contribution: nan
  Overall assessment: Poor - Consider adjusting thresholds or checking input video quality
2025-09-09 06:45:42,592 - src.pipeline.adaptive_extraction_pipeline - INFO - === Pipeline Complete ===
Selected: 5 frames
Total time: 38.51s
Memory peak: 1272.4MB
2025-09-09 06:45:42,594 - src.core.feature_extractor - INFO - Cleanup complete. Final stats: {'frames_processed': 36, 'cache_hits': 5, 'oom_recoveries': 0, 'processing_time': 1.6658711433410645, 'avg_processing_time': 0.04627419842614068, 'cache_hit_rate': 0.1388888888888889}
2025-09-09 06:45:42,594 - src.core.saliency_analyzer - INFO - Saliency analyzer cleanup complete. Stats: {'frames_analyzed': 41, 'high_saliency_frames': 0, 'processing_time': 1.6658711433410645, 'avg_processing_time': 0.04627419842614068, 'high_saliency_rate': 0.0, 'frames_processed': 36, 'cache_hits': 5, 'oom_recoveries': 0, 'cache_hit_rate': 0.1388888888888889}
2025-09-09 06:45:42,594 - src.core.dynamic_sampler - INFO - Dynamic sampler cleanup complete. Final stats: {'total_frames_processed': 536, 'frames_selected': 0, 'feature_rich_regions': 0, 'feature_poor_regions': 36, 'feature_rich_frames_selected': 0, 'feature_poor_frames_selected': 5, 'processing_time': 38.347824811935425, 'overall_selection_rate': 0.0, 'poor_region_efficiency': 0.1388888888888889}
2025-09-09 06:45:42,594 - src.pipeline.adaptive_extraction_pipeline - INFO - Pipeline cleanup completed
2025-09-09 06:45:42,594 - __main__ - INFO - ✅ Extraction completed successfully using dinov3_small
2025-09-09 06:45:42,594 - src.core.feature_extractor - INFO - Cleanup complete. Final stats: {'frames_processed': 36, 'cache_hits': 5, 'oom_recoveries': 0, 'processing_time': 1.6658711433410645, 'avg_processing_time': 0.04627419842614068, 'cache_hit_rate': 0.1388888888888889}
